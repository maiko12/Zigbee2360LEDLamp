(()=>{"use strict";var n={667:(n,e,t)=>{t.d(e,{A:()=>a});var i=t(601),o=t.n(i),s=t(314),r=t.n(s)()(o());r.push([n.id,'html,\nbody {\n  background: black;\n  font-family: Roboto, sans-serif;\n  margin: 0;\n  padding: 0;\n  color: white;\n  text-align: center;\n  width: 100%;\n  background-attachment: fixed;\n  overflow: auto;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh; /* Make the body at least the height of the viewport */\n}\n\n.header {\n  position: fixed;\n  width: 100%;\n  height: 9%;\n  font-size: 30px;\n  color: black;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: white;\n}\n\n.footer {\n  color: white;\n  width: 100%;\n  height: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: baseline;\n  background: black;\n}\n\n.footer img {\n  height: 100px;\n}\n\n.content {\n  display: flex;\n  flex-wrap: nowrap;\n  flex-direction: row;\n  align-items: center;\n  flex: 1;\n}\n\n.content .container {\n  width: 50%;\n}\n\n.sliderContainers {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n\n.position-label {\n  margin: 10px 0;\n  font-size: 1.5em;\n}\n\n\n\ninput[type="checkbox"],\n.toggle-input {\n  display: none;\n}\n\nbutton,\n#uploadButton {\n  justify-content: center;\n  cursor: pointer;\n  transition: 500ms;\n  align-items: center;\n  user-select: none;\n}\n\n#caption {\n  text-align: center;\n  font-size: 14px;\n  margin-top: 40px;\n}\n\n.slider-container {\n  padding: 10px 0;\n  margin: 10px 0;\n}\n\n.slider-label {\n  font-size: 1.5em;\n  margin-bottom: 10px;\n}\n\n.slider-container input {\n  -webkit-appearance: none;\n  width: 100%;\n  height: 1px;\n  margin: 20px 0;\n  border-radius: 50%;\n  background: none;\n  outline: none;\n  opacity: 1;\n  -webkit-transition: 0.2s;\n  transition: opacity 0.2s;\n  position: relative;\n}\n\n.slider input:hover {\n  opacity: 1;\n}\n\n.slider-container input::-webkit-slider-thumb {\n  appearance: none;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  cursor: pointer;\n  background: white;\n}\n\n.slider1 {\n  height:80px;\n  border-radius: 1px;\n  background: linear-gradient(to right, \n        rgb(0, 0, 0) 0%, \n        white 100%) no-repeat,\n        linear-gradient(to bottom, \n        transparent 100px, \n        black calc(100% - 30%)) no-repeat;\n        background-size: 95% calc(100% - 90%);\n        background-position: center;\n}\n\n.slider2 {\n  height:80px;\n  border-radius: 1px;\n  background: linear-gradient(to right, \n        rgb(255, 255, 255) 0%, \n        rgb(251, 255, 0) 100%) no-repeat,\n        linear-gradient(to bottom, \n        transparent 100px, \n        black calc(100% - 30%)) no-repeat;\n        background-size: 95% calc(100% - 90%);\n        background-position: center;\n}\n\n.toggle-switch {\n  position: relative;\n  display: inline-block;\n  width: 60px;\n  height: 34px;\n  margin: -10px 5px 15px;\n}\n\n.toggle-label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 60px;\n  height: 34px;\n  border-radius: 17px;\n  background-color: #ccc;\n  cursor: pointer;\n  transition: background-color 0.4s ease;\n}\n\n.toggle-label:before {\n  content: "";\n  position: absolute;\n  top: 3px;\n  left: 3px;\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background-color: #fff;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n  transition: transform 0.4s ease;\n}\n\n.toggle-input:checked + .toggle-label {\n  background-color: #86d993;\n}\n\n.toggle-input:checked + .toggle-label:before {\n  transform: translateX(26px);\n}\n\n.wifi-button {\n  position: relative;\n  display: block;\n  padding: 0;\n  font-size: 1em;\n  background: linear-gradient(to top, #2e2d2d, #212121);\n  z-index: 2;\n  color: white;\n  border-style: solid;\n  border-width: 1px 1px 0 1px;\n  border-color: #2c2d2c;\n  min-height: 2em;\n  margin-top: 10px;\n  padding: 10px;\n}\n\n.state {\n  font-size: 1.2rem;\n  color: grey;\n}\n\n.modal {\n  display: none;\n  position: fixed;\n  z-index: 10;\n  top: 0;\n  max-height: calc(100vh - 80px);\n  min-height: 25%;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.36);\n  box-shadow: 0 4px 30px rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(5px);\n  -webkit-backdrop-filter: blur(5px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n}\n\n.modal-close:hover,\n.modal-close:focus {\n  color: rgb(255, 255, 255);\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.modal-close {\n  position: absolute;\n  right: 0.5em;\n  color: #aaa;\n  font-size: 3em;\n  font-weight: bold;\n}\n\n.modal-background {\n  background: rgba(0, 0, 0, 0.8);\n  position: fixed;\n  z-index: 2;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  top: 0;\n  display: none;\n}\n\n.row {\n  display: grid;\n  grid-auto-flow: column;\n  grid-column-gap: 10px;\n  width: 100%;\n}\n\n.row-mobile {\n  display: flex;\n  flex-direction: row;\n}\n\n.nav-button {\n  width: fit-content;\n  background: none;\n  font-size: 1em;\n  border: 0;\n  right: 0;\n  position: absolute;\n}\n',""]);const a=r},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",i=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),i&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),i&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,i,o,s){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var c=0;c<n.length;c++){var d=[].concat(n[c]);i&&r[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},601:n=>{n.exports=function(n){return n[1]}},72:n=>{var e=[];function t(n){for(var t=-1,i=0;i<e.length;i++)if(e[i].identifier===n){t=i;break}return t}function i(n,i){for(var s={},r=[],a=0;a<n.length;a++){var l=n[a],c=i.base?l[0]+i.base:l[0],d=s[c]||0,p="".concat(c," ").concat(d);s[c]=d+1;var h=t(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(u);else{var m=o(u,i);i.byIndex=a,e.splice(a,0,{identifier:p,updater:m,references:1})}r.push(p)}return r}function o(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var s=i(n=n||[],o=o||{});return function(n){n=n||[];for(var r=0;r<s.length;r++){var a=t(s[r]);e[a].references--}for(var l=i(n,o),c=0;c<s.length;c++){var d=t(s[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=l}}},659:n=>{var e={};n.exports=function(n,t){var i=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,o&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var s=t.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},e={};function t(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={id:i,exports:{}};return n[i](s,s.exports,t),s.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var i in e)t.o(e,i)&&!t.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:e[i]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var i=t(72),o=t.n(i),s=t(825),r=t.n(s),a=t(659),l=t.n(a),c=t(56),d=t.n(c),p=t(540),h=t.n(p),u=t(113),m=t.n(u),g=t(667),f={};function b(){window.app.led_instances.forEach((n=>{n.slider1.value=0,n.slider2.value=0;const e={leds:[{index:n.index,mainBrightness:n.slider1.value,colorBalance:n.slider2.value}]};window.app.wsJson.send(JSON.stringify(e))}))}f.styleTagTransform=m(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),o()(g.A,f),g.A&&g.A.locals&&g.A.locals,window.app={wsJson:null,wifiScanner:null,led_instances:[],networkModal:null};class y{constructor(n,e=10){this.url=n,this.maxRetries=e,this.reconnectInterval=1e3,this.maxReconnectInterval=3e4,this.reconnectAttempts=0,this.connect()}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("WebSocket connection established"),this.reconnectAttempts=0},this.ws.onmessage=n=>{console.log("Received data: "+n.data);try{const e=JSON.parse(n.data);if(e.hasOwnProperty("config")){const n=e.config;Object.entries(n).forEach((([n,e])=>{const t=document.getElementById(n);t&&("INPUT"===t.tagName&&"text"===t.type&&(t.placeholder=e),"BUTTON"===t.tagName&&t.classList.toggle("active",e))}))}e.hasOwnProperty("leds")&&Array.isArray(e.leds)&&(e.leds.forEach((n=>{window.app.led_instances[n.index]?(console.log(`Updating LED instance for index ${n.index}`),window.app.led_instances[n.index].set(n)):(console.log(`Creating new LED instance for index ${n.index}`),window.app.led_instances[n.index]=new x(n))})),document.getElementById("loader").style.visibility="hidden")}catch(n){console.error("Error processing the message:",n)}},this.ws.onclose=n=>{console.log(`WebSocket connection closed: ${n.reason}`),this.reconnect()},this.ws.onerror=n=>{console.log(`WebSocket error: ${n.message}`),this.ws.close()}}reconnect(){if(this.reconnectAttempts>=this.maxRetries)return void console.log("Maximum reconnect attempts reached. No longer attempting to reconnect.");this.reconnectAttempts++;const n=Math.min(this.reconnectInterval*2**this.reconnectAttempts,this.maxReconnectInterval);console.log(`Attempting to reconnect in ${n/1e3} seconds`)}send(n){this.ws.readyState===WebSocket.OPEN?this.ws.send(n):console.log("WebSocket is not open. Message not sent.")}close(){this.ws.close()}}class x{constructor(n){this.index=n.index,this.position=n.position,this.positionContainer=document.getElementById("sliderContainers"),this.createElements(n),this.addEventListeners()}createElements(n){this.slidercontainer=document.getElementById(`sliderContainer_${this.index}`),this.slidercontainer?console.log(`Element for index ${this.index} already exists.`):(this.slidercontainer=document.createElement("div"),this.slidercontainer.id=`sliderContainer_${this.index}`,this.slidercontainer.className="slider-container",this.positionLabel=document.createElement("div"),this.positionLabel.className="position-label",this.positionLabel.innerHTML=`${this.position}`,this.slidercontainer1=document.createElement("div"),this.slidercontainer1.className="slider1",this.slider1=document.createElement("input"),this.slider1.type="range",this.slider1.className="slider",this.slider1.id=`slider1_${this.index}`,this.slider1.min=0,this.slider1.max=1024,this.slider1.step=10,this.slider1.value=n.mainBrightness,this.slider1label=document.createElement("label"),this.slider1label.className="state",this.slider1label.setAttribute("for",`slider1_${this.index}`),this.slider1label.innerHTML="Brightness:",this.slidercontainer2=document.createElement("div"),this.slidercontainer2.className="slider2",this.slider2=document.createElement("input"),this.slider2.type="range",this.slider2.className="slider1",this.slider2.id=`slider2_${this.index}`,this.slider2.min=0,this.slider2.max=1024,this.slider2.step=10,this.slider2.value=n.colorBalance,this.slider2label=document.createElement("label"),this.slider2label.className="state",this.slider2label.setAttribute("for",`slider2_${this.index}`),this.slider2label.innerHTML="Color Balance:",this.slidercontainer.appendChild(this.positionLabel),this.slidercontainer.appendChild(this.slidercontainer1),this.slidercontainer1.appendChild(this.slider1label),this.slidercontainer1.appendChild(this.slider1),this.slidercontainer.appendChild(this.slidercontainer2),this.slidercontainer2.appendChild(this.slider2label),this.slidercontainer2.appendChild(this.slider2),this.positionContainer.appendChild(this.slidercontainer))}addEventListeners(){this.slidercontainer.querySelectorAll("input").forEach((n=>{n.addEventListener("input",(()=>{const n={leds:[{index:this.index,mainBrightness:this.slider1.value,colorBalance:this.slider2.value}]};window.app.wsJson.send(JSON.stringify(n))}))}))}set(n){this.slider1.value=n.mainBrightness,this.slider2.value=n.colorBalance}}class w{constructor(n,e,t,i,o){this.scanButton=document.getElementById(n),this.spinner=document.getElementById(e),this.wifiList=document.getElementById(t),this.ssidInput=document.getElementById(i),this.passwordInput=document.getElementById(o)}async startScan(){this.toggleButtonSpinner(!0),await this.performWifiScan(),this.toggleButtonSpinner(!1)}async performWifiScan(){try{const n=await fetch("/doScanWiFi");if(!n.ok)throw this.handleError("Error"),new Error("Network response was not ok");const e=await n.json();this.updateWifiList(e)}catch(n){this.handleError("Error"),console.error("Error:",n)}finally{this.toggleButtonSpinner(!1)}}handleError(n){this.scanButton&&(this.scanButton.innerHTML=n,this.scanButton.style.background="red",this.scanButton.style.color="white",setTimeout((()=>{this.scanButton&&(this.scanButton.innerHTML="Scan WiFi",this.scanButton.style.background="",this.scanButton.style.color="")}),5e3))}toggleButtonSpinner(n){this.scanButton&&(this.scanButton.innerHTML=n?"":"Scan WiFi"),this.spinner&&(this.spinner.style.display=n?"inline-block":"none")}updateWifiList(n){this.wifiList.innerHTML="";const e=document.createElement("ul");e.style.listStyle="none",e.style.padding="0",n.forEach((n=>{const t=document.createElement("li");this.applyThemeStyles(t),t.style.margin="5px 0",t.style.padding="10px",t.style.cursor="pointer",t.onclick=()=>{this.ssidInput.value=n.ssid,this.passwordInput.focus()};const i=document.createElement("div");i.textContent=`SSID: ${n.ssid}`,t.appendChild(i);const o=document.createElement("div");o.textContent=`Signal: ${this.getSignalStrength(n.rssi)}`,t.appendChild(o);const s=document.createElement("div");s.textContent=`Encryption: ${this.getEncryptionType(n.encryption)}`,t.appendChild(s),e.appendChild(t)})),this.wifiList.appendChild(e)}applyThemeStyles(n){document.body.classList.contains("dark-mode")?(n.style.border="1px solid #3498db",n.style.backgroundColor="#000",n.style.color="#fff"):(n.style.border="1px solid #ccc",n.style.backgroundColor="#f9f9f9",n.style.color="#333")}getEncryptionType(n){switch(n){case 0:return"Open";case 1:return"WEP";case 2:return"WPA PSK";case 3:return"WPA2 PSK";case 4:return"WPA/WPA2 PSK";case 5:return"WPA2 Enterprise";case 6:return"Max";default:return"Unknown"}}getSignalStrength(n){return n>=-50?"Excellent":n>=-60?"Very Good":n>=-70?"Good":n>=-80?"Moderate":"Weak"}}class v{constructor(n,e){this.modal=document.getElementById(n),this.openBtn=document.getElementById(n.replace("_modal","_bmodal")),this.background=document.getElementById("modal-background"),this.closeBtn=this.modal.querySelector(".modal-close"),this.plusButton=this.modal.querySelector(".plusButton"),this.content=this.modal.querySelector(".modal-content"),this.index=e,this.componentCounter=[],this.init()}init(){this.closeBtn&&this.closeBtn.addEventListener("click",(()=>this.closeModal())),this.openBtn&&this.openBtn.addEventListener("click",(()=>this.openModal())),this.background&&this.background.addEventListener("click",(()=>this.closeModal()))}openModal(){this.modal&&this.background&&(this.modal.style.display="block",this.background.style.display="block",document.body.style.overflow="hidden")}closeModal(){this.modal&&this.background&&(this.modal.style.display="none",this.background.style.display="none",document.body.style.overflow="auto")}}function k(){document.getElementById("password").type=this.checked?"text":"password"}document.addEventListener("DOMContentLoaded",(function(){window.app.wifiscanner=new w("scanWiFi","scanWiFiSpinner","wifi-list","ssid","password"),document.getElementById("toggle-password").addEventListener("change",k),window.app.networkModal=new v("wifi_modal"),window.app.wsJson=new y("ws://localhost:5500/ws"),document.getElementById("powerButton").addEventListener("click",b)}))})();